# 課題2レポート

標準画像「cat」を原画像とする．この画像は縦1066画像，横1066画素による正方形のディジタルカラー画像である．

## 原画像の表示

![cat](https://user-images.githubusercontent.com/50776559/71508485-49cf0e80-28cb-11ea-87fc-ca4bfb64c480.jpg)

図1 原画像

## 原画像をグレースケール

```
ORG=imread('img/cat.jpg'); % 原画像の入力
ORG = rgb2gray(ORG); colormap(gray); colorbar;
imagesc(ORG); axis image; % 画像の表示
```

によって，原画像を読み込み，色をグレーにし、表示した結果を図2に示す．

![kadai2_1](https://user-images.githubusercontent.com/50776559/71319562-5f1af600-24e3-11ea-9b30-12e2d9335d12.png)

図2 原画像をグレースケールした画像

## 2階調画像の作成

```
IMG = ORG>128;
imagesc(IMG); colormap(gray); colorbar;  axis image;
```

によって、2階調画像を作成し表示した。結果を図3に示す。

![kadai2_2](https://user-images.githubusercontent.com/50776559/71319563-5f1af600-24e3-11ea-916f-f7315baf96d7.png)

図3 2階調画像

## 4階調画像の作成

```
IMG0 = ORG>64;
IMG1 = ORG>128;
IMG2 = ORG>192;
IMG = IMG0 + IMG1 + IMG2;
imagesc(IMG); colormap(gray); colorbar;  axis image;
```

によって、4階調画像を作成し表示した。結果を図4に示す。

![kadai2_3](https://user-images.githubusercontent.com/50776559/71319564-5fb38c80-24e3-11ea-8509-972fbb27439a.png)

図4 4階調画像の作成

## 8階調画像の作成

```
IMG0 = ORG>32;
IMG1 = ORG>64;
IMG2 = ORG>128;
IMG3 = ORG>192;
IMG = IMG0 + IMG1 + IMG2 + IMG3;
imagesc(IMG); colormap(gray); colorbar;  axis image;
```

によって、8階調画像を作成し表示した。結果を図5に示す。

![kadai2_4](https://user-images.githubusercontent.com/50776559/71319565-5fb38c80-24e3-11ea-8148-02f5f36ec4f7.png)

図5 8階調画像の作成

## 考察

本課題は2階調、4階調、8階調の画像を生成する事、またこれを行うことで現れる疑似輪郭を確認することであった。各階調画像の生成は元画像をグレースケールにした後、特定の濃度を抽出し、それらの和を取ることで実現する。まず図2の2階調画像を例に取り、本課題で使用したプログラムで何を行っているのかを考察する。
　以下が図2の2階調画像を生成するためのプログラムである。

IMG = ORG>128;
imagesc(IMG); colormap(gray); colorbar; axis image;
pause;

ここでのORGは原画像をグレースケールにしたものが格納されている。2階調にするためには黒(0)および白(1)を区別する閾値を定める必要がある。閾値は256 / 階調数で求めることができる。よって2階調の場合の閾値は256 / 2 より128と求めることができる。従って
IMG = ORG>128;
では、閾値128を用いてグレースケール画像の2値化を行う。つまりORGの画素値が128以上である場合には1(白)、128未満の場合には0(黒)としている。これにより2階調画像が実現された。
　次に、図3の4階調画像を生成するプログラムを見る。

IMG0 = ORG>64;
IMG1 = ORG>128;
IMG2 = ORG>192;
IMG = IMG0 + IMG1 + IMG2;
imagesc(IMG); colormap(gray); colorbar; axis image;
pause;

ここでもORGには同様に原画像をグレースケール化したものが格納されている。異なる点は4階調画像を表現するには閾値を3つ用意する必要がある点である。まず2階調の場合と同様に256 / 階調数により閾値を一つ求める。256 / 4 より64が一つの閾値として求められる。これの2倍となる128、3倍となる192を閾値に設定することで、256を等間隔に4つに分割することができる。IMG0には閾値64の2階調画像、IMG1には閾値128の2階調画像･･･というように各閾値によって2階調となった画像が格納される。最後にこれらの和となる画像IMGを生成することで閾値を3つ持つ画像、すなわち4階調となる画像が生成された。

8階調画像の場合も同様に256 / 8 = 32 より閾値を32の倍数となるように7つ取り、各閾値により2値化した7つの画像の和を取ることにより8階調画像を生成した。

図5の8階調画像を見ると、キャラクターの顔面や、手前部分に濃度の境目が現れていることが分かる。これが疑似輪郭と呼ばれるものであり、ディジタル画像における画像劣化要因の一つとなるものである。