# 課題10レポート

標準画像「cat」を原画像とする．この画像は縦1066画像，横1066画素による正方形のディジタルカラー画像である．

## 原画像の表示

![cat](https://user-images.githubusercontent.com/50776559/71508485-49cf0e80-28cb-11ea-87fc-ca4bfb64c480.jpg)

図1 原画像

## 原画像をグレースケール

```
ORG = rgb2gray(ORG); % 白黒濃淡画像に変換
imagesc(ORG); colormap(gray); colorbar; % 画像の表示
```

によって，原画像を読み込み，色をグレーにし、表示した結果を図2に示す．

![kadai10_2](https://user-images.githubusercontent.com/50776559/71510006-b4cf1400-28d0-11ea-94e7-72548631151f.png)

図2 原画像をグレースケールした画像

## プレウィット法を用いた場合

```
IMG = edge(ORG,'prewitt'); % エッジ抽出（プレウィット法）
imagesc(IMG); colormap('gray'); colorbar;% 画像表示
```

によって、プレウィット法を用いた場合の画像を作成し表示した。結果を図3に示す。

![kadai10_3](https://user-images.githubusercontent.com/50776559/71510007-b567aa80-28d0-11ea-8771-7aef337567a3.png)

図3 プレウィット法を用いた場合


## ソベル法を用いた場合

```
IMG = edge(ORG,'sobel'); % エッジ抽出（ソベル法）
imagesc(IMG); colormap('gray'); colorbar;% 画像表示
```

によって、画像を作成し表示した。結果を図4に示す。

![kadai10_4](https://user-images.githubusercontent.com/50776559/71510009-b567aa80-28d0-11ea-90b5-43f97d660790.png)

図4 ソベル法を用いた場合

## 考察

本課題は3つの主要なオペレータを用いてエッジ抽出を体験することであった。まずこの3つの主要なオペレータとは
1. プレウィット(Prewitt)
2. ソベル(Sobel)
2. キャニー(Canny)
である。

まずこうしたオペレータが生まれた背景として、ノイズがある場合のエッジ抽出がある。単純に濃度値の変化点および変化量を抽出する処理であると、濃度値が急激に変化するノイズに対しても反応してしまう問題がある。こういった問題に対応すべく、ノイズに強いエッジ抽出オペレータが考えられた。これらはいずれも近傍の濃度の平均値の差を使うことでこの問題を解決している。

まず1つ目にプレウィット法である。プログラムでは以下を実行している。
IMG = edge(ORG,'prewitt');
edgeメソッドではエッジ抽出法を指定することができ、ここでは’prewitt’とすることでプレウィット法を指定している。このプレウィット法のオペレータはx,y軸で以下のように定義されている。

1 0 -1
1 0 -1
1 0 -1
プレウィット法　X軸

1 1 1
0 0 0
-1 -1 -1
プレウィット法　Y軸

これに対して、ソベル法は中心画素の影響を強調した処理となり、

1 0 -1
2 0 -2
1 0 -1
ソベル法　X軸

1 2 1
0 0 0
-1 -2 -1
ソベル法　Y軸

となる。プログラムは以下を実行している。
IMG = edge(ORG,'sobel');
プレウィットより中心画素を強調した処理とした結果、図3と図4を比較するとソベル法の方が、細かな輪郭まで抽出していることが確認できる。しかし、ターゲットとしているエッジ以外にも細かく拾ってしまう可能性を考えるとこの二つにも使い分けの必要性が感じられる。

最後にキャニー法である。MathWorksがmatlabのedgeメソッドで最も強力なエッジ抽出法と呼ぶのがこれである。キャニー法は異なる2つの閾値を用いることでその精度を高めている。この2つの閾値は弱いエッジ、強いエッジで使い分けられ、雑音による影響を抑え、弱いエッジ部分も正確に抽出することができる。キャニー法の処理手順を以下に示す。

①画像の平滑化
②エッジ強度と方向の算出
③画像の細線化
④閾値処理

①画像の平滑化ではガウシアンフィルタを用いてノイズの影響を減少させる。
②エッジ強度と方向の算出ではソベル法を用いて各方向の微分を得た後、各画素における強度と方向を算出する。
③画像の細線化では①の平滑化によって太くなっているエッジを細くする。エッジの画素値と鉛直方向の隣接画素値を比較し、最大でなければ0とする。
④閾値処理では弱いエッジ、強いエッジ用に2つの閾値を設定する。高い閾値を超えるものはエッジとして抽出。低い閾値を下回るものはエッジではないと判定。これらの間にある画素値に関しては、近傍にエッジ画素が存在する場合のみエッジと判定する。

これらの処理により高精度なエッジ抽出がされている。確かに他の方法を用いた結果と比べ、キャニー法を用いた図5は線が少し太くなっているものの、綺麗にエッジの抽出が為されている様子が確認できる。

実行結果の画像を全て比較してもやはり綺麗にエッジ抽出がされていると感じるのはキャニー法であり、様々な応用が利くと感じた。形状の判別などができるため、自動車の自動運転などでは標識の判別や道路の白線などをうまく検出できるのではと考えた。また工場などで動くロボットは商品を自動で判別して振り分ける作業などを行っている。こうした動作にも関わってくるのではないかと考えられる。