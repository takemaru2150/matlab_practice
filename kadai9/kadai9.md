# 課題8レポート

標準画像「cat」を原画像とする．この画像は縦1066画像，横1066画素による正方形のディジタルカラー画像である．

## 原画像の表示

![cat](https://user-images.githubusercontent.com/50776559/71508485-49cf0e80-28cb-11ea-87fc-ca4bfb64c480.jpg)

図1 原画像

## 原画像をグレースケール

```
ORG = rgb2gray(ORG); % 白黒濃淡画像に変換
imagesc(ORG); colormap(gray); colorbar; % 画像の表示
```

によって，原画像を読み込み，色をグレーにし、表示した結果を図2に示す．

![kadai9_1](https://user-images.githubusercontent.com/50776559/71509576-2312d700-28cf-11ea-8394-8d87c469b62f.png)
図2 原画像をグレースケールした画像

## 図2にごま塩ノイズを添付した画像

```
ORG = imnoise(ORG,'salt & pepper',0.02); % ノイズ添付
imagesc(ORG); colormap(gray); colorbar; % 画像の表示
```

によって、図2にごま塩ノイズを添付した画像を作成し表示した。結果を図3に示す。

![kadai9_2](https://user-images.githubusercontent.com/50776559/71509577-2312d700-28cf-11ea-970f-bbbfb86e3bd4.png)

図3 図2にごま塩ノイズを添付した画像

## 図3に平滑化フィルタを適用した画像

```
IMG = filter2(fspecial('average',3),ORG); % 平滑化フィルタで雑音除去
imagesc(IMG); colormap(gray); colorbar; % 画像の表示
```

によって、図3に平滑化フィルタを適用した画像を作成し表示した。結果を図4に示す。

![kadai9_3](https://user-images.githubusercontent.com/50776559/71509578-2312d700-28cf-11ea-92f6-86145876590e.png)

図4 図3に平滑化フィルタを適用した画像


## 図3にメディアンフィルタを適用した画像

```
IMG = medfilt2(ORG,[3 3]); % メディアンフィルタで雑音除去
imagesc(IMG); colormap(gray); colorbar; % 画像の表示
```

によって、図3にメディアンフィルタを適用した画像を作成し表示した。結果を図5に示す。

![kadai9_4](https://user-images.githubusercontent.com/50776559/71509579-23ab6d80-28cf-11ea-86d5-77ab37833bb6.png)

図5 図3にメディアンフィルタを適用した画像

## 図5に設計したフィルタを適用した画像

```
f=[0,-1,0;-1,5,-1;0,-1,0]; % フィルタの設計
IMG = filter2(f,IMG,'same'); % フィルタの適用
imagesc(IMG); colormap(gray); colorbar; % 画像の表示
```

によって、図5に設計したフィルタを適用した画像を作成し表示した。結果を図6に示す。


![kadai9_5](https://user-images.githubusercontent.com/50776559/71509580-23ab6d80-28cf-11ea-9ebc-46e6d980e8d5.png)

図6 図5に設計したフィルタを適用した画像

## 考察

本課題は画像にノイズを添付した後、メディアンフィルタを用いてそのノイズ除去の効果を確かめることであった。
　まず実行結果に示した画像を得るための処理を順に確認していく。処理は全てで以下の5つとなる。

1. グレースケール画像の生成
2. ノイズの添付
3. 平滑化フィルタの適用(ノイズ添付後の画像に適用)
4. メディアンフィルタの適用(ノイズ添付後の画像に適用)
5. 設計フィルタの適用

1つ目のグレースケール画像は
ORG = rgb2gray(ORG);
を実行することにより得られた。詳細については省略。

2つ目のノイズの添付は
ORG = imnoise(ORG,'salt & pepper',0.02);
を実行することにより実現している。
imnoiseメソッドでは画像に対してノイズを添付する処理をサポートしている。ここで選択しているのは　salt & pepper　すなわちごま塩ノイズと呼ばれるノイズであり、0と255の画素を散りばめることでノイズとする。0.02という値はノイズ添付の密度を表しており、2%の添付率といえる。つまり256x256の画像に対しては以下の式から1310の画素に対してノイズ添付の処理が行われていると考えられる。
256×256×0.02=1310

3つ目の平滑化フィルタの適用は
IMG = filter2(fspecial('average',3),ORG);
を実行することにより実現している。filter2メソッドは2次元画像に対するフィルタ処理をサポートしている。引数にはフィルタと対象となる画像を用意する必要がある。従ってfspecialメソッドでフィルタの作成を行っている。今回は平滑化フィルタであるので average を指定し、3という値は適用範囲となる行数および列数を指す。つまり3x3で平滑化フィルタを適用している。実行結果を見ると確かに画像はフィルタが掛けられ、ぼやけたような、にじんだような画像となっている事が分かる。

4つ目のメディアンフィルタの適用は
IMG = medfilt2(ORG,[3 3]);
を実行することにより実現している。medfilt2メソッドは2次元画像に対するメディアンフィルタ処理をサポートしている。今回 [3 3] と指定することで3行3列を処理範囲としてメディアンフィルタ処理を行っていると考えられる。平滑化フィルタは着目画素を指定範囲の平均値で置き換えるのに対して画像全体がぼやけた印象となる。一方、メディアンフィルタは中央値で置き換えるため、画像全体がぼやけることなくノイズ除去を行うことができる。また今回の画像のように、背景が単色であるような画像の場合にはゴマ塩ノイズを除去するには平滑化フィルタを用いるとどうしてもノイズ成分が残ってしまう。一方で中央値で置き換えるメディアンフィルタの場合には単色背景の中にある浮いた画素成分に関しては中央値となる可能性は極めて小さいため綺麗にノイズ除去が為されていると考えられる。

5つ目の設計フィルタの適用は
f=[0,-1,0;-1,5,-1;0,-1,0];
IMG = filter2(f,IMG,'same');
を実行することにより実現している。まず設計部を見ると以下のようなフィルタとなっている事が分かる。
